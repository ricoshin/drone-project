<html>
<head>
  <title>[ROS drone pkg]논문리뷰_Scale-Aware Navigation of a Low-Cost Quadrocopter with a Monocular Camera</title>
  <basefont face="나눔고딕" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303244 (ko-KR, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 나눔고딕;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1688"/>
<h1>[ROS drone pkg]논문리뷰_Scale-Aware Navigation of a Low-Cost Quadrocopter with a Monocular Camera</h1>

<div><span><div><span style="font-size: 24px;"><br/></span></div><div><span style="font-size: 24px;"><b>Scale-Aware Navigation of a Low-Cost Quadrocopter with a Monocular Camera</b></span></div><div>_Jakob Engel, J ̈urgen Sturm, Daniel Cremers (Department of Computer Science, Technical University of Munich, Germany)</div><div><br/></div><div><br/></div><div><span style="font-size: 24px;"><b>ABSTRACT </b></span></div><div><br/></div><div><span style="color: rgb(0, 128, 0);"><i>본 논문에서 개발한 시스템은 세 가지 파트로 구성</i></span></div><div>- 모노큘러 슬램 (monocular SLAM)</div><div>- 테이터 퓨전과 자세 예측을 위한 확장 칼만 필터</div><div>- 조종 커맨드를 생성하기 위한 PID 컨트롤러</div><div><br/></div><div>이 시스템 자체 외에도, 관성과 고도 측정을 동해 비주얼 맵의 절대 스케일을 예측하는 closed-form 솔루션을 제시함에 의미가 있음.</div><div><br/></div><div>(1) 컨트롤 루프에서 발생하는 큰 딜레이를 상쇄하기 위한 간단하고 효율적인 방법 제안. (정확한 비행 동역학 모델을 사용)</div><div>(2) 추가적 미터 거리를 측정하는 센서를 이용하여 모노큘러 슬램 시스템의 스케일을 예측하기 위한 closed-form 방법 제안.</div><div><br/></div><div><span style="color: rgb(255, 102, 0);">*역주 : 수학에서 closed-form expression은 유한한 개수의 연산자로 계산될 수 있는 수학적 표현식을 말한다. </span></div><div><span style="color: rgb(255, 102, 0);">상수와 변수, 잘 알려진 연산자(예. 사칙연산자)와 함수(제곱근, 익스포넌트, 로그, 삼각함수, 역하이퍼볼릭함수 등)을 포함할 수 있지만, </span></div><div><span style="color: rgb(255, 102, 0);">보통 극한(limit)은 포함하지 않음. closed-form으로 인정되는 연산자와 함수의 집합은 저자와 문맥에 따라 다를 수 있음.</span></div><div><br/></div><div>우리는 외부 모션 캡쳐 시스템을 이용하여 드론의 포즈 예측 정확도, 비행 정확도, 비행 민첩성 등에 대하여 시스템 전체를 광범위하게 평가함.</div><div>나아가, 초음파 고도계를 사용했을 때와 공기압센서를 사용했을 때의 필터기반 스케일 예측의 수렴정도와 정확도를 비교함.</div><div><br/></div><div><br/></div><div><b style="font-size: 24px;">1.INTRODUCTION</b><br/></div><div><br/></div><div>최근 개발된 시스템은 외부 모션 캡처 시스템을 필요로 함.</div><div>알지 못하는 지형에서 GPS 신호없이 비행하는 것은 아직도 연구할 영역이 많다.</div><div><br/></div><div>이 연구의 핵심은 로봇이 자신이 가지고 있는 센서에만 의존하여 자기 자신의 위치를 알고</div><div>센서 데이터를 잠시 받지 못하더라도 그에 굴하지 않고 비행가능하도록 하는 것임.</div><div>부정확한 액츄에이터와 잡음이 많은 센서, 딜레이, 온보드 컴퓨터 리소스의 제한 등 저가 하드웨어에서는 이를 가능케 한다는 것은 더욱 어려움.</div><div><br/></div><div><span style="color: rgb(0, 128, 0);"><i>다른 비전센서(스테레오, 뎁스카메라 등)에 비해 모노큘러 카메라의 장점</i></span></div><div>1.무게와 소모 전력, 크기, 가격에 비해 얻는 정보의 양이 어마어마하다.</div><div>2.뎁스 측정 장치와는 달리 단안 카메라의 히범위는 가상적으로 제한되있지 않음. 작고 제한된 공간이나 크고 오픈된 공간 모두에 사용가능.</div><div>단점은 하나의 카메라만으로는 환경의 스케일이 결정될 수 없다는 것. IMU와 같은 추가 센서가 필요함.</div><div><br/></div><div>300달러 밖에 안하는 AR.Drone사용. 온보드 컴퓨터 성능이 완전히 구려서, 모든 계산은 외부에서 수행함.</div><div><br/></div><div>이 논문이 기여하는 바는 2가지임.</div><div>첫째로, 미터 단위 거리 측정을 통해 맵 스케일을 결정하기 위해 최대 우도 예측기를 유도해 냄. <span style="color: rgb(255, 0, 0);">추가적 센서(초음파 or 기압계) ---&gt; 스케일 펙터 결정!</span></div><div>둘째로, 제어 시스템에서 큰 딜레이를 처리하기 위한 테크닉을 제공하여 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">GCS에서의 제어 루프가 잘 돌아갈 수 있도록 함. </span></div><div><br/></div><div><br/></div><div><b><span style="font-size: 24px;">2.RELATED WORK</span></b></div><div><br/></div><div>이전에 있었던 쿼드콥터 자율 비행에 관한 연구는 여러 분류로 나눌 수 있음.</div><div>첫번째는, 정확한 쿼드콥터 컨트롤에 집중하는 분야이다. </div><div>그러나 이 연구들은 <i><span style="color: rgb(0, 128, 0);">진보된 외부 트랙킹 시스템에 의존하고 있고, 그들의 활용도를 연구실 환경에 제한하고 있다.</span></i></div><div>유사한 연구로는 환경 안에서 인공 마커를 구분하여 간단한 포즈 예측을 하는 것이다.</div><div>또다른 연구는 이전에 녹화된 수동 비행으로부터 오프라인으로 맵을 만들고, 쿼드콥터가 같은 경로를 다시 날 수 있도록 하는 것이 있음.</div><div>야외 비행에서는 GPS기반의 자세 예측이 가능하고 상업용 제품을 위한 완벽한 솔루션들이 있음.</div><div><br/></div><div>우리는 모르는 환경에서 GPS없이 자동 비행하는 것에 초점을 맞춘다.</div><div>유사한 연구로는 가벼운 레이저 스캐너나 키넥트, 스테레오 리그를 주요 센서로 사용한 것들이 있다.</div><div>이러한 센서들은 환경의 절대적 스케일을 제공하지만, 그들의 단점은 제한된 범위와 무거운 무게, 큰 사이즈, 높은 전력 소비를 갖는다는 점이다.</div><div><br/></div><div>우리 연구에서는 이러한 단점을 극복하기위해 카메라 하나만을 사용하여 포즈 예측을 시도한다.</div><div>비슷한 시도로는 옵티컬 플로우게 기반한 것이 있으며, 상업적으로 판매중인 하드웨어도 있음.</div><div>그러나 이 시스템들은 시간이 지나면 드리프트의 영향을 받으며, 장기간 비행에는 부적합하다.</div><div><br/></div><div>이러한 드리프트를 제거하기 위해서 다양한 모노큘러 SLAM이 오프보드, 온보드 프로세싱에서 연구됨.</div><div><i><span style="color: rgb(0, 128, 0);">모노큘러 SLAM의 문제는 IMU나 GPS와 같은 미터거리를 측정하는 추가 센서에 의해 지도의 스케일이 예측되어야 한다는 것임.</span></i></div><div><br/></div><div>이러한 스케일을 예측하기 위한 최신 연구에서는 <span style="color: rgb(255, 102, 0);">추가적 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">state 변수로써 </span><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">스케일이 추가된 확</span>장칼만필터를 사용</span>하였다.</div><div>이와는 대조적으로, <span style="color: rgb(255, 0, 0);">우리는 직접적으로 미지의 스케일 펙터를 계산하는 방법</span>을 새롭게 제안한다.</div><div>통계학적 수식을 사용하여 closed-form이고 지속 가능한 스케일 예측기를 유도해낸다.</div><div>우리의 방법은 시뮬레이션과 실제 구동에서 정확한 결과를 제공하며, 필터링보다 더 적은 컴퓨팅 리소스를 사용한다.</div><div>이 방법은 모노큘러 SLAM 알고리즘과 위치나 속도를 측정하는 센서<span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">(초음파, 기압계, GPS)</span>를 함께 사용하는 시스템이라면 모두 사용가능하다.</div><div><br/></div><div><br/></div><div><b><span style="font-size: 24px;">3.HARDWARE PLATFORM</span></b></div><div><br/></div><div>AR.Drone은 주요 장점은 낮은 가격과 충돌에 안전하다는 것.</div><div>단점은, 소프트웨어와 하드웨어가 모두 쉽게 수정할 수 없고, 오직 wireless LAN을 통해서만 통신가능하다는 제한이 있음.</div><div><br/></div><div><span style="font-size: 18px;"><b>A.센서</b></span></div><div>3축 자이로스코프와 가속도계, 초음파 고도계와 2개의 카메라.</div><div>- 전방 카메라 : 73.5x58.5도 FOV, 320x240 해상도, 40ms의 딜레이(첫번째줄과 마지막줄 사이)를 가지는 롤링셔터.</div><div>                    영상은 랩탑에 18fps로 스트림되며, 손실을 감수하고 압축해서 보낸다.</div><div>- 하방 카메라 : 47.5x36.5도 FOV, 176x144, 60fps.</div><div>온보드 소프트웨어는 수평 속도를 예측하기 위해 하방 카메라를 사용한다.</div><div>쿼드콥터는 자이로스코프 측정값과 예측된 수평 속도를 200Hz로 전송하고, 초음파 측정값은 25Hz로 전송한다.</div><div><span style="color: rgb(0, 128, 0);"><i>가속도계의 raw 데이터는 직접적으로 접근할 수 없다.</i></span></div><div><br/></div><div><span style="font-size: 18px;"><b>B.컨트롤</b></span></div><div>온보드 소프트웨어는 쿼드로콥터의 롤, 피치, 요 회전 속도, 수직 속도를 제어하기 위해 이 센서들을 사용한다. </div><div>이는 외부 레퍼런스 값에 따라 진행되는데, 이 레퍼런스는 매 10ms마다(100hz) 새로운 컨트롤 커맨드를 전송함으로써 설정된다.</div><div><br/></div><div><br/></div><div><span style="font-size: 24px;"><b>4.SCALE ESTIMATION FOR MONOCULAR SLAM</b></span></div><div><br/></div><div>이 논문에서 우리는 <span style="color: rgb(255, 0, 0);">모노큘러 시스템의 스케일 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ를 예측하기 위한</span> 닫힌 형태의 솔루션</span>을 제안한다. </div><div>이를 위해 우리는 로봇이 하나 혹은 그 이상의 미터 측정 센서<span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">(초음파나 공기압센서)</span>로부터 얻은 잡음이 낀 절대거리나 절대속도를 얻는다고 가정한다.</div><div>첫번째 쳅터에서, 통계학적으로 문제를 공식화한다.</div><div>두번째 쳅터에서, 몇가지 간단한 예측 전략을 논하고, 왜 그 들이 치우친 결과로 이어지는지 설명한다.</div><div>세번째 쳅터에서, 스케일 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ를 예측하기 위한 최대 우도 예측기를 도출한다.</span></div><div>네번째 쳅터에서, 필요한 테이터 처리 단계를 설명한다.</div><div>다섯번째 쳅터에서, 데이터로부터 어떻게 필요한 파라미터가 예측되는지 설명한다.</div><div><br/></div><div><span style="font-size: 18px;"><b>4.1. 문제 공식화</b></span></div><div><b><br/></b></div><div>첫 단계로, 쿼드로콥터가 특정 시간동안 이동한 d 차원의 거리를 일정 간격으로 측정한다.</div><div>측정은 비주얼 슬램 시스템 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 134349.png" type="image/png"/>와 미터측정 센서  <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 134431.png" type="image/png"/> 값을 따른다.</div><div>고도계의 측정 차원은 1차원이므로 오직 수직 운동만 측정 가능한 반면에 GPS와 같은 다른 센서들은 3차원 이동을 측정할 수 있다.</div><div>각각의 인터벌은 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 135028.png" type="image/png"/> 샘플 쌍을 갖는다. <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"> </span><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 134349 [1].png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>은 비주얼 맵에 스케일링되어 있고, <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 134431 [1].png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>는 미터 단위이다.</div><div><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"> </span><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 134349 [2].png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>와 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 134431 [2].png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>는 모두 쿼드로콥터의 움직임을 측정한 것이므로, 그들은 서로 연관되어 있으며, 식으로 나타내면 이와 같다 : <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 135302.png" type="image/png"/></div><div><br/></div><div>더 구체적으로, 만약 우리가 등방성(isotropic), 만약 우리가 센서 측정값에 가우시안 화이트 노이즈가 있다고 가정할때, </div><div>우리는 여러 샘플쌍 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 135526.png" type="image/png"/>을 다음과 같은 식으로 구할 수 있다.</div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 142449.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/></div><div><br/></div><div><span style="color: rgb(255, 102, 0);">μ는 실제 거리(미지수)이고 σ는 측정 오차의 분산이다.</span></div><div>실제 거리 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">μ는 상수가 아니고 각각의 측정 인터벌 안에서 쿼드로콥터가 움직인 실제거리에 대응한다.</span></div><div>전처리 단계는 4.4에서 더 설명한다.</div><div><br/></div><div><span style="font-size: 18px;"><b>4.2.나이브 예측 전략</b></span></div><div><b><br/></b></div><div><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">이러한 샘플들을 가지고 λ를 예측하기 위한 </span>직접적이고 나이브한 접근 방법은 </div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 140913.png" type="image/png" style="font-family:"Helvetica Neue", Arial, sans;font-size:16px;"/><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">의 몫 집합의 </span>산술평균과 기하평균, 혹은 중간값을 계산하는 것이다. 그러나 이런 방식은 실패한다.</div><div><br/></div><div><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ가 1이고 </span><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 134349 [3].png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>에 측정 오차가 없으며, 오직 두개의 샘플만 있다고 가정해보자 : (1, 0.5), (1, 1.5)</div><div>비록 y1과 y2는 실제 값에서 대칭으로 분포해 있지만, 기하평균이나 산술평균 모두 스케일을 정확하게 예측할 수 없다.</div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 141641.png" type="image/png"/> : 실제 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ=1을 예측 실패.</span></div><div><br/></div><div>다른 접근법은 재 스케일링된 측정값 사이의  SSD(Sum of Squared Differences)를 최소화하는 것이다.</div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 142208.png" type="image/png"/></div><div><br/></div><div>두 식의 차이는 x를 y로 스케일링 하느냐 혹은 그 반대 방향으로 하느냐의 차이다.</div><div>그러나 두 접근법도 샘플을 더 추가했을 때 실제 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ값에 수렴하지 않는</span> 문제를 여전히 갖는다.</div><div>이 효과를 더 자세히 분석하기 위해 (1)식의 파라미터 세팅을 다양하게 하여 인공적으로 데이터를 생성한 후, 위 방법들을 적용해보았다.</div><div><br/></div><div><br/></div><div>모든 위의 예측 전략은 실제 값에 일치하지 않는다. 샘플의 갯수가 무한대로 늘어날 동안 옳은 값으로 수렴하지 않음.</div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 151032.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/></div><div><br/></div><div><span style="font-size: 18px;"><b>4.3.최대우도(Maximum Likelihood) 솔루션</b></span></div><div><b><br/></b></div><div>최대우도 예측은 미지수 파라미터를 예측하기 위하여 널리 사용되는 통계적 모델이다.</div><div>핵심 아이디어는 그 데이터를 관측할 확률이 최대화되는 미지수 파라미터를 선택하는 것이다.</div><div>전형적으로, 그 파라미터는 음수 로그우도(negative loglikelihood)를 최소화하는 값이다.</div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 145121.png" type="image/png"/></div><div>모든 μ에 대해 최소화를 먼저하고, 그 다음 λ에 대하여 최소화를 하면, </div><div>(4)식은 아래의 파라미터에서 유일한 전역 최소점을 갖는다.</div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 145417.png" type="image/png"/></div><div>(단, <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 145517.png" type="image/png"/><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 145533.png" type="image/png"/>)</div><div><br/></div><div>이 두가지 공식은 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 145805.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/><span style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">와 </span><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 145819.png" type="image/png" style="font-family:"Helvetica Neue", Arial, sans;font-size:16px;"/><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">을 알고 있다고 가정했을 때</span> <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ을 예측할 수 있는 ML(머신러닝?) 예측기를 위한 닫힌 형태의 솔루션을 제공한다.</span></div><div>이 솔루션이 다음 두가지 중요한 특성을 갖는다는 것은 쉽게 증명 가능하다.</div><div><br/></div><ol><li>λ* 는 항상 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λx*와 </span><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λy*의 사이에 존재한다.</span></li><li><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 145805 [1].png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>가 0에 가까워지면, <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ*는 </span><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λx*과 가까워진다.</span><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 145819 [1].png" type="image/png" style="font-family:"Helvetica Neue", Arial, sans;font-size:16px;"/><span style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">가 0에 가까워지면</span><span style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">, </span><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ*는 </span><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λy*과 가까워진다. </span></li></ol><div>          이 예측기는 두 개의 측정 소스 중 하나가 노이즈가 없을 때, 양극단의 케이스로 가게된다.</div><div><br/></div><div>이 것은 둘 중 하나의 측정 값이 노이즈가 없을 때의 극단적 케이스 사이를 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">두개의 극단적 케이스</span> 사이를 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ*가 적절히 보간해줌을 발견할 수 있도록 한다.</span></div><div>이는 두 측정 소스의 분산을 알고 있다는 전제하에 가능하다.</div><div>위에서 살펴본 전체적인 최소화 과정과 이 두가지 특성의 유도는 다음 논문에서 찾을 수 있다.</div><div>J. Engel, “Autonomous Camera-Based Navigation of a Quadro-</div><div>copter,” Master’s thesis, Technical University Munich, 2011.</div><div><br/></div><div>다시 우리는 이 예측기를 (1)에 따라 인공적으로 생성한 데이터에 적용시켰다. 결과는 다음과 같다.</div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 151042.png" type="image/png"/></div><div>다른 파라미터들에 대하여 적용했을 때도, 심지어 높은 노이즈 레벨을 갖고있을때도, 항상 옳은 값으로 수렴함을 볼 수 있다. </div><div>6.1에서는 우리가 제안하는 예측기에 대한 더 방대한 평가를 볼 수 있음.</div><div>인공 데이터와 센서들을 통해 얻은 실제 데이터를 통한 정확도 결과 뿐 아니라 필터링 기반 방법과의 비교도 수행한다.</div><div><br/></div><div><span style="font-size: 18px;"><b>4.4.샘플세트의 생성</b></span></div><div><b><br/></b></div><div>우리는 방금 유도한 방법을 사용하여 비주얼 슬램 시스템의 스케일을 예측한다. </div><div>슬램은 30hz로 동작하며, 공기압 센서는 200hz로 동작한다. </div><div><br/></div><div>샘플 쌍 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"> </span><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 135526 [1].png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>을 계산하기 위해 우리는 다음을 수행한다.</div><div><br/></div><div>1.각각의 비주얼 고도 측정값<img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 151859.png" type="image/png"/>에 대하여, 우리는 raw 센서 측정치의 작은 윈도우를 평균하여 대응하는 미터 고도 측정값<img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 152040.png" type="image/png"/>을 계산한다.<br/></div><div>  윈도우 사이즈는 각각의 raw 측정치를 최대 한번만 사용하여 선택함으로써, 측정 노이즈를 감소하면서 통계적 독립성을 유지하도록 한다.</div><div>2.각각의 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 151859 [1].png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>에 대하여, 우리는 특정 시간 간격인 k 프레임 안에서 이동한 시각적 거리를 계산한다. xi := <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 153308.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/></div><div>   같은 시간동안 움직힌 미터 거리도 역시 계산한다. yi :=<img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 153333.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/></div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 152422.png" type="image/png"/></div><div>이 과정은 위 그림과 같다. 결과는 각각의 비주얼 포즈 예측에 대하여 통계적으로 독립적인 샘플 쌍을 하나씩 갖는다. (예를 들면, 초당 30개의 샘플)</div><div>윈도우 사이즈 k는 자유롭게 선택할 수 있다. 만약 쿼드로콥터가 빨리 움직인다면 이 값은 작을 수 있고, 만약 느리게 움직인다면 증가시켜야할 수 있다.</div><div>실제로 우리는 1~2초 동안 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">k값이 </span> 30~60사이가 좋은 결과를 내는 것을 발견했다.</div><div>더 결과가 잘나오게 하려면 각 프레임마다 쿼드로콥터의 속도에 따라 k를 다르게 선택해줄 수도 있다.</div><div><br/></div><div><span style="font-size: 18px;"><b>4.5.측정값 분산의 예측</b></span></div><div><b><br/></b></div><div>λ*를 계산하려면 미터 센서의 분산인 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 154417.png" type="image/png"/>과 비전 예측 값의 분산인 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 154428.png" type="image/png"/>을 알아야한다.</div><div>이 분산은 다음의 데이터를 통해 다음의 가정 아래서 예측할 수 있다.</div><div>(1) 연속적인 측정은 독립적이고 동일하게 분포되어 있다.</div><div>(2) 측정은 정기적인 시간 간격으로 이루어졌다.</div><div>(3)쿼드로콥터의 속도는 세번의 연속적인 측정동안은 거의 상수이다.</div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 154806.png" type="image/png"/></div><div><br/></div><div>-- 생략</div><div><br/></div><div>우리는 포즈 예측 분산이 상수라고 가정함을 주목하라 : 공기압 센서에서는 이러한 가정이 타당할 수 있으나 비주얼 슬램 시스템에서는 이 것이 유효함에 의문을 가질 수 있다. 비주얼 슬램에서 포즈 에러는 비행 도중에 바뀔 수 있는 많은 요소들에 의지하고 있기 때문이다. 특히 관찰된 키포인트들의 갯수와 뎁스에따라 달라질 수 있다. 그러나 실제로는 비주얼 슬램 시스템에서 정확도는 매우 미세하게 변화하고, 고도 압력 센서의 측정오차가 지배적이다.(자기장값에 의해)비</div><div><br/></div><div><span style="color: rgb(255, 0, 0);">결론 --&gt; Scale factor를 구하려면 초음파또는 기압계에 의한 높이 값이 사용되어야 한다!!</span></div><div><br/></div><div><br/></div><div><span style="font-size: 24px;"><b>5.VISUAL NAVIGATION SYSTEM</b></span></div><div><br/></div><div>5.1 개발된 시스템과 주요 컴포넌트 오버뷰</div><div>5.2/5.3 개발된 EKF의 디테일과 그것의 관찰/예측 모델, 그리고 어떻게 딜레이를 상쇄했는지</div><div>5.5 실제 쿼드로 콥터에 의존적인 모델 파라미터들이 테스트 비행 데이터로부터 어떻게 예측될 수 있는지</div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 115427.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/></div><div><br/></div><div><span style="font-size: 18px;"><b>5.1 시스템 오버뷰</b></span></div><div><br/></div><div><b>1) 모노큘러 슬램</b></div><div>PTAM 기반. 맵 초기화후에 가속도계 데이터에 기반하여 xy평면이 수평면에 대응하도록 비주얼 맵을 회전시키고,</div><div> 평균 키포인트 뎁스를 1로 스케일함. 트랙킹을 통해서 맵의 스케일이 예측됨. (<span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">섹션 4에서 설명)</span></div><div>EKF로부터온 포즈 예측을 사용하여 추적된 프레임을 구별하고 잘못 추적된 프레임을 걸러낼 뿐 아니라 트래킹을 상실하더라도 다시 위치를 찾을 수 있게 돕는다.</div><div><br/></div><div><b>2) 확장 칼만 필터</b></div><div>모든 가능한 데이터를 융합하기 위해 EKF를 도입한다. 쿼드로콥터의 비행 동역학과 컨트롤 커맨드에 대한 반응과 같은 모든 모션 모델을 포함한다.</div><div>EKF는 시스템에서의 시간 지연을 보상하기 위해서도 사용된다.</div><div><br/></div><div><b>3) PID컨트롤</b></div><div>EKF로부터의 위치와 속도 예측에 기반하여 원하는 목표 지점(글로벌 좌표)으로 콥터를 조종하기 위해 PID 제어를 적용한다.</div><div>현재의 state 예측에 따라서, 우리는 생성된 컨트롤을 로봇 중심의 좌표계로 변환하여 콥터에게 보낸다.</div><div>네 개의 자유도에 대해서 독립적인 PID 제어를 적용한다. 게인값은 우리가 실험적으로 결정함.<b><span style="color: rgb(255, 0, 0);"> 게인값 튜닝문제!</span></b></div><div><br/></div><div><span style="font-size: 18px;"><b>5.2.EKF 예측과 관측</b></span></div><div><b><br/></b></div><div><span style="color: rgb(255, 0, 0);">state 공간은 10개의 state 변수로 구성되어 있다.</span></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 163145.png" type="image/png"/></div><div>월드 좌표계에 대한 위치(m), 월드 좌표계에 대한 초당 속도(m/s), 롤, 피치, 요, 요 각속도(deg/s).</div><div>이후에서는 각각의 센서에 대한 관찰 함수 h(x)를 정의하고 각각의 관찰 벡터 Zt가 센서값으로부터 어떻게 유도되었는지 설명한다.</div><div><br/></div><div><b>5.2.1. 오토메트리 관측 모델</b></div><div><br/></div><div>콥터는 <span style="color: rgb(255, 102, 0);">로컬 좌표계에서의 수평 속도를</span> 측정한다. 우리는 이 것을 <span style="color: rgb(255, 0, 0);">글로벌 좌표 프레임으로 변환</span>해야 한다.</div><div>가속도계에 의해 <span style="color: rgb(255, 0, 0);">측정된 롤, 피치 각도는 그대로 사용</span>하면 된다.</div><div>요-드리프트와 비평탄한 지면을 고려하여, <span style="color: rgb(255, 102, 0);">높이 측정값</span>과 <span style="color: rgb(255, 102, 0);">요(yaw) 측정값</span>을 <b><span style="color: rgb(255, 0, 0);">미분</span></b>하여 그들을 각각의 속도에 대한 관측으로 취급한다.</div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 170043.png" type="image/png"/></div><div><br/></div><div><b>5.2.2.비주얼 관측 모델</b></div><div><b><br/></b></div><div>PTAM이 성공적으로 비디오 프레임을 추적했을때, 우리는 먼저 포즈 예측치를 예측해 놓은 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ*로 스케일링하고, </span>콥터의 좌표계로 변환한다. </div><div>이는 콥터 포즈의 직접적인 관측으로 이어지며, 식은 다음과 같다.</div><br/><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 171256.png" type="image/png"/></div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 171510.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>는 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">λ를 사용해 스케일링된 예측된 카메라 포즈.</span></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 171523.png" type="image/png"/>는 카메라에서 콥터 좌표계로의 상수 변환. </div><div>f는 6개의 실수에서 롤-피치-요 표현으로의 변환함수.</div><div><br/></div><div><b>5.2.3.예측 모델</b></div><div><b><br/></b></div><div>예측 모델은 어떻게 state 벡터 x가 하나의 시간 단계에서 다음 단계로 나아갈 수 있는지를 설명한다.</div><div>특히, 우리는 콥터의 현태 state x를 기반으로, 콥터의 수평 가속도를 추측하고, </div><div>state x와 활성화된 컨트롤 u를 기반으로, 수직 가속도와 요-회전 가속도, 롤/피치 회전 속도를 예측한다.</div><div><br/></div><div>다음과 같이, 수평 가속도는 쿼드로콥터에 작용한 수평방향의 힘에 비례한다.</div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 172542.png" type="image/png"/></div><div>일반적으로 견인력(drag force)는 선형과 2차항을 가지고 있고, 이는 층적인 흐름과 요동치는 흐름에 대응한다.</div><div>그러나 상대적으로 낮은 이동 속도를 고려할때 우리는 현재 수평 속도의 선형 함수에 의해서만 예측해도 큰 문제는 없다.</div><div>가속력은 수평면 위의 콥터의 z축 프로젝션에 비례한다. 이는 다음과 같이 표현 가능하다.</div><br/><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 173348.png" type="image/png"/></div><div>R()은 롤, 피치, 요 각도에 의해 정의된 회전 행렬 내부의 항목들을 의미한다.</div><div><br/></div><div>이 모델은 네 개의 로터에 의해 만들어진 전체적 추력이 일정하다고 가정하고 있음을 주의하라.</div><div>더 나아가, 우리는 보내진 컨트롤의 영향인 u에 대한 영향을 선형 모델을 사용하여 예측한다.</div><div><br/></div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 173840.png" type="image/png"/></div><div><br/></div><div>이제 (18)에서 (23)까지 명시된 모델을 사용함으로써 전체적인 state 이동 함수를 구할 수 있다.</div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 173931.png" type="image/png"/></div><div><br/></div><div>많은 예측이 수행되었기 때문에, 우리는 이 모델의 물리적 정확함을 주장하지 않는다. 그러나 우리가 섹션 6에서 보여주듯이,</div><div>실제로는 매우 잘 작동한다 : 모든 state파라미터와 모든 컨트롤 커맨드의 행동이 근사되므로 &quot;블라인드&quot; 예측을 가능케 한다.</div><div>예를 들어, 짧은 시간동안 관측없는 예측을 가능케 한다. 이 것은 다음 섹션에서 설명하듯이, 효과적인 딜레이 보상을 위한 중요한 사전 준비단계이다.</div><div><br/></div><div>5.3.지연 보상</div><div><br/></div><div>쿼드로콥터와 같이, 빨리 반응하는 시스템을 제어하기 위해서는, 정확성 뿐만아니라 딜레이 없이 state 예측을 하는 것도 필수적이다.</div><div>딜레이는 발진과 불안정한 동작을 유발한다. 이 시스템에서 우리는 비디오 프레임이 캡쳐되고 그 프레임을 기반으로로 한 컨트롤 커맨드가 콥터로 도달하기 까지의</div><div> 타임 딜레이를 최대 250ms까지 관측하였다. 게다가 다른 센서는 다른 딜레이를 가지므로 적당한 동기화가 요구되었다.</div><div><br/></div><div> 우리는 높이와 수평 속도 측정이 같은 딜레이로 도착하는 것을 확인 하였고, 이 것은 애티튜드 측정의 딜레이보다 살짝 컸다.</div><div>시각적 포즈 예측의 딜레이는 가장 컸다. 게다가 우리는 새로운 컨트롤 커맨드가 콥터로 도착하기까지의 시간도 고려했다.</div><div>이어서 주어지는 모든 소요시간 값은 전형적인 값으로써, 우선 통신의 질에 달려 있고 </div><div>콥터로 보내지는 일반적 ICMP echo요청과 오프라인 캘리브레이션 실험의 결합으로 결정된다.</div><div>우리는 일부러 온보드 하드웨어나 소프트웨어를 변경하는 것을 자제했다. 온보드에서는 현재 타이밍 정보를 제공하지 않는다.</div><div>우리는 오직 그라운드 스테이션에서만 타임스탬프를 사용한다.</div><div><br/></div><div>우리의 접근법은 다음과 같다. 첫째, 우리는 모든 들어오는 데이터에 타임스탬프를 찍고 관측 버퍼에 저장한다.</div><div>그리고 나서 <img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 201056.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/>에서의 쿼드로 콥터의 포즈에 대한 예측을 사용하여 컨트롤 커맨드가 계산된다. 이때 t는 현재 시간이다.</div><div><br/></div><div>5.4.컨트롤</div><div><br/></div><div>5.5모델 파라미터 예측</div><div><br/></div><div>정확한 예측을 달성하기 위해, 모델의 주의깊은 캘리브레이션이 필요하다. 우리는 예시로 c1과 c2의 예측하는 과정을 보일 것이다.</div><div>이 파라미터들은 쿼드로콥터의 수평 속도 상 애티튜드의 효과를 결정한다. 남은 파라미터인 c3에서 c8까지의 파라미터도 유사하게 예측된다.</div><div>이를 위해 우리는 예측된 모델 속도를 가지고 모션캡쳐 시스템으로부터 ground truth 속도를 근사한다.</div><div>모션 캡쳐 시스템은(18)에 유도된 모델에 따라, ground truth attitude만을 기반으로 재귀적으로 쿼드로콥터의 속도를 예측한다.</div><div><br/></div><div>6.실험과 결과</div><div><br/></div><div>6.1.스케일 예측 정확도</div><div><br/></div><div>실세계 데이터에서 우리가 제안한 ML 예측기와 초음파 고도계를 사용한 경우, 평균 스케일 예측 오차는 3초후에 5%, 20초후에 1%로 떨어졌다.</div><div>기압계를 사용한경우 10초뒤에 20%, 30초 뒤에 5%로 떨어졌다. 이는 관성 측정치만 사용했을 때보다 눈에 띄게 개선된 것이다.</div><div>한편, 이러한 사실은 맵 초기화 후에 최초 두번째 프레임을 획득하기 위해 충분한 수직 모션을 포함해야한다는 제한이 있다. 실제로는 이를 준수하는게</div><div>어렵지는 않다. 또한, 기압계를 사용했을때는 first seconds 동안에 스케일이 매우 부정확할 수 있으므로, 적절한 초기 혹은 그에 앞선 추정이 요구된다.</div><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 195112.png" type="image/png" style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"/><span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">도</span></div><div>6.5. 토의</div><div> 우리는 다양한 행사에서 다양한 방문자들에게 성공적으로 우리의 시스템을 시연했다.</div><div>매우 성공적이었으며, 일반적으로 훌륭하고 매우 안정적인 퍼포먼스를 보였다.</div><div> 하나의 약점은 무선 랜 통신에 대한 의존도가 높다는 것인데, 이는 스마트폰과 같이 많은 무선 장비들이 있을때 문제가 되었다.</div><div>이 것은 모든 계산을 온보드로 실행하면 해결될 것이고, 이는 더 정교한 하드웨어를 필요로 할 것이다.</div><div>둘째로, 우리의 접근법은 적절한 시각적 환경을 필요로 한다. 정면 카메라에 의존도가 높기 때문에 충분한 구조와 질감이 질감이 있는 FOV가 필요했고 </div><div>적절한 거리(우리 경험으로는 2-15m)가 요구되었다.</div><div>초음파 기반의 스케일 예측에서는, 평평한 지표면이 가정되었고, 갑작스러운 점프(예, 테이블위로 비행)는 이상치로 감지되거나 필터링되어 제거되었다.</div><div>비행 패턴에 따라, 경사진 지표면은 스케일 예측 결과를 편향되게 만들 수 있다. 그러나 이 것은 실내 환경에서는 드물며,</div><div>야외에서는 공기압 고도계가 적절한 대안이 될 수 있다.</div><div>세번째로, 모든 모노큘러 슬램 방법이 그렇듯이, PTAM은 동시에 충분한 이동을 하지 않으면서 제자리에서 큰 회전(yaw)을 하는 경우 잘 작동하지 않는다.</div><div>새롭게 보이는 파트에 삼각법에 의해 계산되려면 충분한 이동이 필요하다.</div><div><br/></div><div><br/></div><div><br/></div><div>7.결론</div><div>우리는 오프보드 프로세싱을 하는 저가 쿼드로콥터를 위한 시각적 네비게이션 시스템을 발표했다. </div><div>우리의 접근법은 쿼드로콥터가 구조화되있지 않고 GPS가 불가능한 지역에서 지형에 대한 사전 지식없이도 시각적으로 탐사를 할 수 있도록 한다.</div><div>우리의 시스템은 광범위하게 테스트하고 평가되었다. 포즈 예측 정확도에서는 3x3x1m 볼륨에서 10cm오차를 보였다.</div><div>제어 정확도에서는 실내에서 4.9cm RMSE, 실외에서는 18.0cm RMSE를 보였다.</div><div>우리는 우리의 스케일 예측 방법이 정확하게 비주얼 맵의 스케일을 예측함을 보였으며, 다른 미터측정 센서들과 함께 사용될 수 있음을 보였다.</div><div>그리고 어떻게 최신 필터링 기반 방법과 비교되는지 시뮬레이션과 실제 데이터를 통해 보였다.</div><div>우리는 <span style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">우리 결과의 재생산과 본 플랫폼에서의 미래 연구를 장려하기 위하여</span> 오픈소스 ROS 패키지 tum_ardrone으로 완전히 구현한 내용을 공유하였다.</div><div><br/></div><br/><div><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/Screenshot from 2016-08-22 201056 [1].png" type="image/png"/></div><div><br/></div><div><a href="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/engel14ras.pdf"><img src="[ROS drone pkg]논문리뷰_Scale-Aware Navigation of_files/61b66a8fe675f243d91b094e7b435931.png" alt="engel14ras.pdf"></a></div></span>
</div></body></html> 