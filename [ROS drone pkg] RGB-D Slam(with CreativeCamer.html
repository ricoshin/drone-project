<html>
<head>
  <title>[ROS drone pkg] RGB-D Slam(with CreativeCamera Senz3d) 테스트 기록</title>
  <basefont face="나눔고딕" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303244 (ko-KR, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 나눔고딕;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1786"/>
<h1>[ROS drone pkg] RGB-D Slam(with CreativeCamera Senz3d) 테스트 기록</h1>

<div><span><div><a href="[VSLAM] CreativeCameraSENZ3D.html" rev="en_rl_minimal">다음 노트 참고</a></div><div><br/></div><div><span style="color: rgb(255, 0, 255);"><span style="font-size: 18px;"><b>RGB-Depth 카메라 CreativeCamera Senz3d를 사용해 </b><b>RGB-D Slam 테스트</b></span></span></div><div><br/></div><ol><li><span style="font-size: 18px;"><b>CreativeCamera Senz3d 리눅스 드라이버 설치</b></span> <a href="https://www.softkinetic.com/AboutUs/NewsEvents/ArticleView/ArticleId/263/SoftKinetic-Releases-Linux-Ubuntu-Driver-for-DepthSense-Cameras" rev="en_rl_minimal">드라이버 출처(다운받으려면 로그인 필요)</a></li></ol><div>          1) 다음 파일 받고 압축 풀기 </div><div><a href="[ROS drone pkg] RGB-D Slam(with CreativeCamer_files/senz3d_Linux_SDK.zip"><img src="[ROS drone pkg] RGB-D Slam(with CreativeCamer_files/702ca452dd362317e1a98187d143f18b.png" alt="senz3d_Linux_SDK.zip"></a></div><div><br/></div><div>          (다운받은 파일 폴더에서)</div><div>          2) chmod +x DepthSenseSDK-1.9.0-5-amd64-deb.run</div><div>          3) sudo ./DepthSenseSDK-1.9.0-5-amd64-deb.run</div><div><br/></div><ol start="2"><li><span style="font-size: 18px;"><b>CreativeCamera Senz3d 의 ROS 드라이버 패키지 설치</b></span></li></ol><div>          1) git clone <a href="https://github.com/ipa320/softkinetic.git" rev="en_rl_small">https://github.com/ipa320/softkinetic.git</a></div><div>          2) catkin_make --pkg=softkinetic,</div><div>               catkin_make --pkg=softkinetic_camera</div><div><br/></div><ol start="3"><li><span style="font-size: 18px;"><b>RGB-D Slam 패키지 설치</b></span></li></ol><div>          1) git clone <a href="https://github.com/felixendres/rgbdslam_v2.git" rev="en_rl_minimal">https://github.com/felixendres/rgbdslam_v2.git</a></div><div>          2) rosdep install rgbdslam</div><div>          3) catkin_make --pkg=rgbdslam</div><div><br/></div><ol start="4"><li><span style="font-size: 18px;"><b>영상 확인</b></span></li></ol><div>          1) <span style="color: rgb(51, 51, 51); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important; background-color: rgb(255, 255, 255);">sudo apt-get install ros-indigo-openni-launch</span></div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">          2) roslaunch softkinetic_camera softkinetic_camera_demo.launch  또는</span></span></div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">          roslaunch softkinetic_camera softkinetic_camera_ds325.launch</span></span></div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">         -&gt; rViz 창 출력</span></span></div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">          3) rgbdslam 설치 디렉토리 &gt; launch &gt; openni+rgbdslaj.launch 파일을 다음과 같이 수정/추가해 myslam.launch(임의이름)로 저장</span></span></div><div>            <span style="color: rgb(102, 102, 153);"><span style="font-size: 12px;">&lt;!-- Input data settings--&gt;</span></span></div><div><span style="color: rgb(102, 102, 153);"><span style="font-size: 12px;">              &lt;param name=&quot;config/topic_image_mono&quot; value=&quot;/softkinetic_camera/rgb/image_color&quot;/&gt; </span></span></div><div><span style="color: rgb(102, 102, 153);"><span style="font-size: 12px;">              &lt;param name=&quot;config/topic_image_depth&quot; value=&quot;/softkinetic_camera/depth/image_raw&quot;/&gt;</span></span></div><div><span style="color: rgb(102, 102, 153);"><span style="font-size: 12px;">             &lt;param name=&quot;config/topic_points&quot; value=&quot;&quot;/&gt; &lt;!--if empty, poincloud will be reconstructed from image and depth --&gt;</span></span></div><div><span style="color: rgb(102, 102, 153);"><span style="font-size: 12px;">             &lt;param name=&quot;config/camera_info_topic&quot; value=&quot;/softkinetic_camera/rgb/camera_info&quot;/&gt;</span></span></div><div>              (slam창에 넣을 input data를, 연결한 senz3d 카메라에서 가져오게 설정한다고 생각하면 됨)</div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">          roslaunch rgbdslam myslam.launch</span></span></div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">          -&gt; rgb-d slam 창 출력</span></span></div><div>          이제 카메라를 움직여 슬램 영상 생성할 수 있음</div><div>          (cf. Displays의 Global Options에서 Fixed Frame 값을 softkinetic_camera_link로 두면 슬램 영상이 약간 더 나아지는 듯한 기분이 듦.)</div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></div><div><span style="font-size: 18px;"><b><font color="#333333"><span style="background-color: rgb(255, 255, 255);">문제</span></font></b></span></div><div><b><span style="color: rgb(255, 0, 0);"><span style="background-color: rgb(255, 255, 255);">- rgb-d slam에서 생성되는 포인트 클라우드 영상이 식별불가능할 정도로 나쁨</span></span></b></div><div><font color="#333333"><span style="background-color: rgb(255, 255, 255);">     cf. 비교영상: </span></font><a href="http://vision.in.tum.de/data/datasets/rgbd-dataset/download" rev="en_rl_minimal">http://vision.in.tum.de/data/datasets/rgbd-dataset/download</a> 에서 more information &gt; ROS bag 파일을 받아 실행.</div><div>     방법:</div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">     1) myslam.launch 파일을 다음과 같이 수정해 myslam_bag.launch(임의이름)으로 저장</span></span></div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">          <span style="font-size: 12px;"><span style="color: rgb(102, 102, 153);">&lt;!-- Input data settings--&gt;</span></span></span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(102, 102, 153);"><span style="background-color: rgb(255, 255, 255);">          &lt;param name=&quot;config/topic_image_mono&quot; value=&quot;/camera/rgb/image_color&quot;/&gt; </span></span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(102, 102, 153);"><span style="background-color: rgb(255, 255, 255);">          &lt;param name=&quot;config/topic_image_depth&quot; value=&quot;/camera/depth/image&quot;/&gt;</span></span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(102, 102, 153);"><span style="background-color: rgb(255, 255, 255);">         &lt;param name=&quot;config/topic_points&quot; value=&quot;&quot;/&gt;</span> <span style="background-color: rgb(255, 255, 255);">&lt;!--if empty, poincloud will be reconstructed from image and depth --&gt;</span></span></span></div><div><span style="font-size: 12px;"><span style="color: rgb(102, 102, 153);"><span style="background-color: rgb(255, 255, 255);">          &lt;param name=&quot;config/camera_info_topic&quot; value=&quot;/camera/rgb/camera_info&quot;/&gt;</span></span></span></div><div>           (slam창에 넣을 input data를, 내부 카메라에서 가져오게 설정한다고 생각하면 됨)</div><div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">     roslaunch rgbdslam myslam_bag.launch</span></span></div><div>    </div><div>     2) 다운받은 bag 파일을 압축 풀어 실행</div><div>     rosbag decompress [bag파일이름]</div><div>     rosbag play [bag파일이름]</div><div><br/></div><div>     -  파라미터값을 수정해 약간의 결과 개선을 기대해볼 수도 있겠으나,</div><div>     근본적으로 senz3d 카메라 특성의 한계(깊이가 깊지 않음)가 작용한다 보고 더이상 작업하지 않기로 함. (아래 그림 참고)</div><div><br/></div><br/><div><img src="[ROS drone pkg] RGB-D Slam(with CreativeCamer_files/senz3d.png" type="image/png" style="height: auto;"/></div><div>출처: 3D registration of multi-view depth data for hand-arm pose estimation (URAI 2014)</div><div><a href="http://www.roborealm.com/help/Creative_Senz3D.php">http://www.roborealm.com/help/Creative_Senz3D.php</a></div><div><br/></div><div>cf. Depth camera 강좌(오로카) <a href="http://cafe.naver.com/openrt/6070">http://cafe.naver.com/openrt/6070</a></div><div><br/></div></span>
</div></body></html> 