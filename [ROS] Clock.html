<html>
<head>
  <title>[ROS] Clock</title>
  <basefont face="나눔고딕" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303244 (ko-KR, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 나눔고딕;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1555"/>
<h1>[ROS] Clock</h1>

<div><span><div>Timestamp</div><div>특정 이벤트가 언제 일어났는지 말해주는 정보. 일련의 문자나 인코딩된 정보로 표현한다. 날짜/시간/분/초 등.</div><div>우체국이나 사무실에서 현재 날짜나 고무 도장으로 문서가 도착했을 때 잉크로 찍던 고무도장에서 유래한 단어.</div><div>현대에는 주로 디지털 데이터에 붙어있는 날짜와 시간 정보로 확장되어 사용되고 있다.</div><div><br/></div><div>타임스탬프는 이벤트 자체가 일어난 시간이 아니라 컴퓨터가 로그파일에 그 이벤트를 기록한 시간이다. (많은 경우 이러한 시간차는 중요치 않다.)</div><div>데이터는 보통 일정한 포멧으로 표현되어, 두 개의 기록을 비교하거나 시간에 따른 진행상황을 추적하기 좋도록 한다.</div><div>타임스탬프는 전형적으로 이벤트 로깅이나 SOE(sequence of events)에 사용됨.</div><div>파일 시스템에서는 파일을 생성하거나 변경할 때 저장되는 날짜/시간이 타임스탬프라고 할 수 있다.</div><div><br/></div><div>타임스탬프의 예.</div><div><ul style="list-style-type: disc; margin: 0.3em 0px 0px 1.6em; padding: 0px; list-style-image: url(&quot;data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%225%22%20height%3D%2213%22%3E%0A%3Ccircle%20cx%3D%222.5%22%20cy%3D%229.5%22%20r%3D%222.5%22%20fill%3D%22%2300528c%22%2F%3E%0A%3C%2Fsvg%3E%0A&quot;); color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin-bottom: 0.1em;">Tue 01-01-2009 6:00</li><li style="margin-bottom: 0.1em;">2005-10-30 T 10:45 <a href="https://en.wikipedia.org/wiki/UTC" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="UTC">UTC</a></li><li style="margin-bottom: 0.1em;">2007-11-09 T 11:20 <a href="https://en.wikipedia.org/wiki/UTC" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="UTC">UTC</a></li><li style="margin-bottom: 0.1em;">Sat Jul 23 02:16:57 2005</li></ul><div style="margin-bottom: 0.1em;"><div><br/></div><div>wall-clock, wall-time</div><div>작업이 시작해서 끝날 때까지 인간이 지각하는 시간의 흐름. (벽에 걸려있는 시계가 측정하는 실제 시간)</div><div>컴퓨터 작업의 경우에는 프로그램상의 딜레이(sleep : 비활성화)나 리소스를 기다리는 시간 때문에 흘러간 시간을 포함하여 경과한 모든 시간을 측정</div><div>(wall-clock-time) = (작업종료시간)  - (작업시작시간)</div><div><br/></div><div>CPU 시간</div><div>어떤 테스크에 대하여 활성화되고 있는 동안만 시간을 측정.</div><div>프로그램상의 딜레이나 리소스가 사용 가능할 때까지 기다리는 시간은 제외하고 실제로 CPU가 해당 프로세스에 대해 할당한 시간만을 측정.</div><div>예를 들어, 실제 프로그램이 수행되는 wall time은 6분이더라도 컴퓨터의 프로세서는 0.04초 동안만 계산을 수행했을 수도 있다.</div><div>(CPU 시간) = (wall-clock-time) - (딜레이시간)</div><div><br/></div><div><br/></div><div>Clock</div><div><br/></div><div>1.도입</div><div><br/></div><div>보통 ROS 클라이언트 라이브러리(roscpp, rospy등)은 당신의 컴퓨터 시스템의 시계(wall-clock, wall-time)를 시간 소스로 사용한다.</div></div><div style="margin-bottom: 0.1em;"><div>그러나, 시뮬레이션을 하거나 기록된 데이터를 다시 재생할때는 시뮬레이션된 가상의 시계를 사용함으로써,</div><div>당신의 시스템이 인지하는 시간이 더 빨리 혹은 느리게 가게 만들거나 스텝별로 흐르도록 제어할 수 있다.</div><div>예를 들어, 당신의 시스템에 센서 데이터를 재생하고 있을 때, 그 센서 데이터의 타임스탬프에 맞추어서 당신의 시간을 흐르게 하고 싶을 것이다.</div><div><br/></div><div>1. Time and Duration</div><div>ROS는 내장된 time과 duration이라고 하는 기본 타입을 가지고 있다.</div><div>( <a href="http://wiki.ros.org/roslib" style="box-sizing: border-box; color: rgb(43, 127, 207); text-decoration: none; border: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(255, 255, 255);">roslib</a>에서 ros::Time과 ros::Duration 클래스로 제공)</div><div><br/></div><div>Time은 특정한 순간(예. 오늘 오후 5시)이고 Duration은 시간의 길이(예. 5시간)이다. Duration은 음수일 수 있다.</div><div>Time과 duration은 동일하게 표현된다.</div><div><br/></div><div style="box-sizing: border-box; font-family: courier, monospace; font-size: 13px; display: block; padding: 5pt; margin: 0px 0px 10px; color: rgb(51, 51, 51); border: 1pt solid rgb(174, 189, 204); border-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(243, 245, 247);">int32 sec<br/>
int32 nsec<br/></div><div><br/></div><div>플랫폼의 타임 루틴을 사용하는 대신에, roscpp의 타임 루틴을 사용해서 현재 시간에 엑세스해야한다.</div><div>roscpp의 타임 루틴은 wall-clock 시간 뿐만 아니라 Simulated <a href="http://wiki.ros.org/Clock" style="box-sizing: border-box; color: rgb(43, 127, 207); text-decoration: none; border: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(255, 255, 255);">Clock</a> 타임을 다루는데도 전혀 문제가 없다.</div><div><br/></div><div>1.1. 현재 시간 가져오기</div><div dir="ltr" lang="en" style="box-sizing: border-box; font-family: courier, monospace; font-size: 13px; display: block; padding: 10pt; margin: 0px; color: rgb(51, 51, 51); border: none; border-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(243, 245, 247);"><div><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(0, 0, 0);">ros</span>::<span style="box-sizing: border-box; color: rgb(0, 0, 0);">Time</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">begin</span> = <span style="box-sizing: border-box; color: rgb(0, 0, 0);">ros</span>::<span style="box-sizing: border-box; color: rgb(0, 0, 0);">Time</span>::<span style="box-sizing: border-box; color: rgb(0, 0, 0);">now</span>();</span></div></div><div>1.1.1 Time zero</div><div>Simulated clock time을 사용할 때 now()를 호출할 경우, /clock 토픽으로 첫 번째 메세지를 받기전에는 '0'을 리턴한다.</div><div>(아직 클럭 타임을 모른다는 의미임으로 루프를 돌면서 0이 아닌 값을 리턴할 때까지 기다리는 등의 대처가 필요하다.)</div><div><br/></div><div>1.2 Time과 Duration 인스턴스 생성하기</div><div>Time이나 Duration을 특정 값으로 생성할 수 있다. (초 단위)</div><div><br/></div><div>다음과 같이 부동소수점으로 표현하거나,</div><div dir="ltr" lang="en" style="box-sizing: border-box; display: block; padding: 10pt; margin: 0px; border: none; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(243, 245, 247);"><div><span style="color: rgb(51, 51, 51);"><span style="font-family: courier, monospace;"><span style="color: rgb(43, 127, 207);"># 다음과 같이 부동소수점으로 값을 넣어줄 수도 있고,</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: courier, monospace;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: gray;"><a href="http://wiki.ros.org/roscpp/Overview/Time#CA-5b0c6d2292f9c85a579250401bb62d0c1ff1f280_1" style="box-sizing: border-box; color: rgb(43, 127, 207); text-decoration: none; border: 0px; background: transparent;">1</a> </span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">ros</span>::<span style="box-sizing: border-box; color: rgb(0, 0, 0);">Time</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">a_little_after_the_beginning</span>(<span style="box-sizing: border-box; color: rgb(0, 128, 192);">0.001</span>);</span><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: gray;"><a href="http://wiki.ros.org/roscpp/Overview/Time#CA-5b0c6d2292f9c85a579250401bb62d0c1ff1f280_2" style="box-sizing: border-box; color: rgb(43, 127, 207); text-decoration: none; border: 0px; background: transparent;">   2</a> </span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">ros</span>::<span style="box-sizing: border-box; color: rgb(0, 0, 0);">Duration</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">five_seconds</span>(<span style="box-sizing: border-box; color: rgb(0, 128, 192);">5.0</span>);</span></span></span></div><div><span style="font-family: courier, monospace;"><span style="color: rgb(51, 51, 51);"><br/></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: courier, monospace;"><span style="color: rgb(43, 127, 207);">#</span></span></span> <span style="color: rgb(43, 127, 207);">정수형 인수 2개를 받는 생성자를 사용해 위와 같은 값을 지정할 수도 있다.</span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-family: courier, monospace;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: gray;"><a href="http://wiki.ros.org/roscpp/Overview/Time#CA-df03fd96d9f2dab1a1307e8db87e6e097b56315b_1" style="box-sizing: border-box; color: rgb(43, 127, 207); text-decoration: none; border: 0px; background: transparent;">1</a> </span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">ros</span>::<span style="box-sizing: border-box; color: rgb(0, 0, 0);">Time</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">a_little_after_the_beginning</span>(<span style="box-sizing: border-box; color: rgb(0, 128, 192);">0</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 192);">1000000</span>);</span><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: gray;"><a href="http://wiki.ros.org/roscpp/Overview/Time#CA-df03fd96d9f2dab1a1307e8db87e6e097b56315b_2" style="box-sizing: border-box; color: rgb(43, 127, 207); text-decoration: none; border: 0px; background: transparent;">   2</a> </span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">ros</span>::<span style="box-sizing: border-box; color: rgb(0, 0, 0);">Duration</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">five_seconds</span>(<span style="box-sizing: border-box; color: rgb(0, 128, 192);">5</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 192);">0</span>);</span></span></span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></div></span>
</div></body></html> 