<html>
<head>
  <title>[APM] ArduPilot Extended Kalman Filter (EKF)</title>
  <basefont face="나눔고딕" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303244 (ko-KR, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 나눔고딕;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1843"/>
<h1>[APM] ArduPilot Extended Kalman Filter (EKF)</h1>

<div>
<span><div><span style="font-size: 32px;"><b>ArduPilot Extended Kalman Filter (EKF)</b></span></div><div><b><br/></b></div><div>Copter와 Plane은 확장 칼만 필터(EKF) 알고리즘을 사용하여 자이로스코프, 가속도계, 콤파스, GPS, 풍속, 기압계 등의 측정을 기반으로 기체의 위치, 속도, 각도 방향을 예측한다.</div><div>다른 간단한 상보 필터 알고리즘에 비해 EKF가 가지는 장점은 모든 가능한 측정치들을 하나로 녹여냄으로써 상당한 오차를 가진 측정치를 억제할 수 있다는 점이다.</div><div>EKF는 네비게이션을 돕기 위해 또한 옵티컬 플로우나 레이저 레인지파인더와 같은 선택적 센서들로부터 오는 값도 활성화시킬 수 있다.</div><div><br/></div><div><span style="font-size: 21px;"><b>흔히 수정되는 파라미터들:</b></span></div><div><br/></div><div><span style="font-size: 19px;"><b>AHRS_EKF_USE</b></span></div><div>1로 설정하면 EKF를 활성화.</div><div>0으로 설정하면 자세 제어를 DCM에 의존하며, 위치 제어는 inertail nav(Copter-3.2.1)나 ahrs dead reckoning(Plane)에 의존한다.</div><div>Copter-3.3에서는 이 요소는 1로 설정하도록 강제되어 있고 바꿀 수 없다.</div><div><b><br/></b></div><div><span style="font-size: 19px;"><b>EKF_ALT_NOISE</b></span></div><div>기본값은 1.0이다. 더 낮은 숫자는 가속도계에 대한 의존성을 낮추고, 고도계에 대한 의존성을 높인다.</div><div><br/></div><div><span style="font-size: 19px;"><b>EKF_GPS_TYPE </b></span></div><div>GPS가 어떻게 사용될 것인지 설정. 아래 참조.</div><div><br/></div><div><br/></div><div><hr/></div><div><br/></div><div><span style="font-size: 32px;"><b>Extended Kalman Filter Navigation 개요 및 튜닝</b></span></div><div><br/></div><div>본 아티클에서는 알고리즘에 대한 개요와 튜닝 파라미터에 대한 정보에 대해 설명한다.</div><div><br/></div><div><span style="font-size: 19px;"><b>개요</b></span></div><div>Pixhawk와 PX4와 같이 더 빨라진 프로세서들의 성능은 기체의 방향, 속도, 위치를 예측하기 위한 더 진보한 수학적 알고리즘을 사용하는 것을 가능케 했다.</div><div>EKF 알고리즘은 자이로스코프, 가속도계, 콤파스, GPS, 기압계 등의 관측치를 사용하여 기체의 위치와, 속도, 각도 방향을 예측하도록 개발되었다.</div><div>이 알고리즘은 AP_NavEKF 라이브러리에 구현되어 있으며 다음에 나와있는 초기의 작업을 기반으로 했다.</div><div><a href="https://github.com/priseborough/InertialNav">https://github.com/priseborough/InertialNav</a></div><div><br/></div><div>PX4와 Pixhawk 유저들은 AHRS_EKF_USE=1을 세팅하면 예전의 상보 필터 대신에 이 알고리즘을 사용할 수 있다.</div><div><br/></div><div>주의 : 가속도계와 컴파스 캘리브레이션을 하지 않았다면  AHRS_EKF_USE=1을 세팅하지 마라. 나쁜 센서 데이터 때문에 잘못된 비행 경로를 야기할 수 있다.</div><div><br/></div><div>DCM에 의해 사용되는 더 간단한 상보필터와 Copters Inertial Nav와 비교하여 EKF가 가지는 장점은</div><div>사용할 수 있는 모든 측정치를 합하여 오차가 있는 측정치를 억제한다는 것이며, 이를 통해 기체는 하나의 센서가 끼치는 잘못에 너무 민감하게 반응하지 않게 된다.</div><div><br/></div><div>EKF의 다른 특징은 기체에서 읽어오는 컴파스값의 오프셋을 예측할 수 있다는 것과 지구 자기장을 역시 예측할 수 있다는 것이다.</div><div>이 것은 기존의 DCM와 INAV 알고리즘에 비해 컴파스 캘리브레이션 에러에 보다 덜 민감하도록 해준다.</div><div><br/></div><div><span style="font-size: 19px;"><b>이론</b></span></div><div>구현된 EKF 알고리즘은 아래를 사용하여 유도된 공식에 의해 총 22개의 state를 예측한다.</div><div><a href="https://github.com/priseborough/InertialNav/blob/master/derivations/GenerateEquations22states.m">https://github.com/priseborough/InertialNav/blob/master/derivations/GenerateEquations22states.m</a></div><div> </div><div>이하는 어떻게 필터가 작동하는지에 대한 엄청나게 간략화된 비수학적 설명이다.</div><div><br/></div><ol><li>IMU 각 속도는 각 위치를 계산하기 위해 적분된다.</li></ol><div><br/></div><ol start="2"><li>IMU 가속도는 각 위치를 사용하여 몸체의 XYZ좌표로부터 NED 좌표계로 변환되고 중력에 맞추어 수정된다.<br/></li></ol><div><br/></div><ol start="3"><li>가속도는 속도를 계산하기 위하여 적분된다.<br/></li></ol><div><br/></div><ol start="4"><li>속도는 위치를 계산하기 위하여 적분된다.<br/></li></ol><div>          1~4까지의 프로세스는 State Predition이라 불린다. state는 롤, 피치, 요, 높이, 풍속력과 같이 우리가 예측하려고 애쓰는 변수이다.</div><div>          이 필터는 위치, 속도, 각도와 같이 천천히 변화할 것으로 예측되는 것들 이외에 다른 state들도 가지고 있다.</div><div>          그 것들은 자이로 바이어스, Z 가속도계 바이어스, 풍속도, 컴파이 바이어스, 지자기 등을 포함한다.</div><div>           이들 state들은 State Prediction 단계에서 직접적으로 변경되지 않고, 이하에서 설명할 측정치에 의해 변경될 수 있다.</div><div><br/></div><ol start="5"><li>예측된 자이로와 가속도계 노이즈(EKF_GYRO_NOISE / EKF_ACC_NOISE)는 IMU 데이터를 사용하여 계산된 각도, 속도, 위치에서의 에러 누적을 예측하기 위해 사용된다.<br/></li></ol><div>          이 파라미터들을 크게 하면 필터 오차 예측값이 더 빨리 커진다. GPS와 같은 다른 측정치를 사용하여 오차 수정을 하지 않는다면, 오차 예측치는 계속 증가할 것이다.</div><div>          이러한 예측된 오차는 State Covariance Matrix라고 부르는 큰 메트릭스에 의해 표현된다.</div><div><br/></div><div>          1~5까지는 새로운 IMU 데이터를 받을 때마다 계속되고, 이러한 반복은 다른 센서값을 사용가능할 때까지 계속된다.</div><div><br/></div><div>          우리가 완벽한 관성 예측을 하고, 완벽한 IMU 측정을 하고, 완벽이 계산을 할 수만 있다면, 우리는 다른 계산이 필요없이 비행할 동안 1~4의 과정만 반복해도 될 것이다.</div><div>          그러나 관성값의 에러와 IMU 측정 에러, 그리고 계산과정에서의 반올림 오차 때문에 몇 초가 지나지 않아서 속도와 위치 오차는 너무 커져버리고 만다.</div><div><br/></div><div>          확장 칼만 필터 알고리즘은 IMU, GPS, 컴파스, 풍속, 고도계, 그리고 다른 센서들로부터 데이터를 합치고 함께 융합시킬 수 있는 수단을 제공하여, 보다 정확하고 믿을만한 위치, 속도, 각도 방향을 계산할 수 있도록 한다.</div><div><br/></div><div>          다음의 예시는 어떻게 GPS의 수평 위치 측정치가 사용되는지, 또한 어떻게 다른 측정 타입(기압계의 고도, GPS의 속도 등)들에 같은 원리가 적용될 수 있는지에 대해 설명한다.</div><div><br/></div><ol start="6"><li>GPS 측정값이 도착하면, 필터는 4에서 예측된 위치와 GPS로부터의 위치사이의 차이를 계산한다. 이 차이는 Innovation이라고 불린다.</li></ol><div><br/></div><ol start="7"><li>6에서 구한 Inovation, 5에서 구한 State Covariance Matrix, EKF_POSNE_NOISE에 의해 정해진 GPS 측정 오차 들이 합쳐져서 각각의 필터 state 들에 대한 수정치를 계산한다.<br/></li></ol><div>          이러한 과정은 State Correction이라고 부른다.</div><div><br/></div><div>          이 부분이 칼만 필터의 기발한 부분이다. 측정되고 있는 값 이외의 state들을 옳게 수정하기 위해, 다른 오차들과 다른 state들 사이의 correlation에 대한 지식을 사용할 수 있도록 하기 때문이다.</div><div>          예를 들어 GPS 위치 측정값은 위치, 속도, 각, 자이로 바이어스에서의 오차를 수정할 수 있다.</div><div><br/></div><div>          오차를 수정하는 양은 [측정에서의 오차]에 대한 [state에서의 오차]의 추정된 비율을 사용하여 조절된다.</div><div>          이 것은 만약 필터가 스스로 계산한 위치가 GPS 측정치보다 정확하다고 생각한다면, GPS 측정에 의한 수정은 더 작아질 것임을 의미한다.</div><div>          만약 필터가 계산한 위치가 GPS 측정치보다 덜 정확하다고 생각한다면, GPS 측정에 의한 수정량은 더욱 커질 것이다.</div><div>          GPS 측정치에 대한 추정 정확도는 EKF_POSNE_NOISE 파라미터에 의해 조절된다.</div><div>          이 파라미터를 크게하면 필터는 GPS 위치가 덜 정확하다고 생각하게 된다.</div><div><br/></div><ol start="8"><li>이제 측정치를 받아들였기 때문에, 각각의 state가 업데이트되는데 있어서의 불확실성이 감소되었다. </li></ol><div>          필터는 State Correction에 의한 불확실성의 감소량을 계산하고, State Covariance Matrix를 업데이트한 후 1번 단계로 돌아간다.</div><div>           </div><div><br/></div><div><hr/></div><div><br/></div><div><span style="font-size: 32px;"><b>EKF2 Navigation System</b></span></div><div><br/></div><div><span style="font-size: 21px;"><b>개요</b></span></div><div><b><br/></b></div><div><span style="font-size: 16px;"><b>EKF2 네비게이션 시스템이란?</b></span></div><div><br/></div><div>AP_NavEKF2 libarary에 포함된 24개 state를 가지는 확장 칼만 필터이며, 아래의 state들을 예측한다.</div><div>- 애티튜드 (쿼터니언)</div><div>- 속도 (NED)</div><div>- 위치 (NED)</div><div>- 자이로 바이어스 옵셋 (XYZ)</div><div>- 자이로 스케일 팩터 (XYZ)</div><div>- Z 가속도 바이어스</div><div>- 지구 자기장 (NED)</div><div>- 바디 자기장 (XYZ)</div><div>- 풍속도 (North, East)</div><div><br/></div><div>이는 아래에 유도된 필터 방정식에 기반하고 있다.</div><div><a href="https://github.com/priseborough/InertialNav/blob/master/derivations/RotationVectorAttitudeParameterisation/GenerateNavFilterEquations.m">https://github.com/priseborough/InertialNav/blob/master/derivations/RotationVectorAttitudeParameterisation/GenerateNavFilterEquations.m</a></div><div><br/></div><div><span style="font-size: 16px;"><b>EKF2의 장점</b></span></div><div><br/></div><ul><li>각각의 IMU에 대해서 개별적인 EKF2를 실행하여 유력하게 의심되는 IMU에 대한 오류를 수정할 수 있다.</li><li>오류가 있을 경우 여러 자력계 중에서 선택이 가능하다.</li><li>자이로 스케일 팩터를 예측함으로써 빠른 속도의 움직임에서 정확도를 증가시켜줄 수 있다.</li><li>이동하는 동안에 자이로 옵셋과 시작 위치에서의 방향을 동시에 예측할 수 있고, 초기 방향을 예측하는데 DCM 알고리즘에 의존하지 않는다.</li></ul><div>          이는 자이로가 보정되어 있지 않았을 때 움직이는 플랫폼으로부터 비행하는 것이 이상적이다.</div><ul><li>비행시 더 큰 자이로 바이어스 변화를 처리할 수 있다.</li><li>나쁜 센서 데이터로부터 더 빠르게 회복할 수 있다.</li><li>약간 더 부드러운 출력을 제공한다.</li><li>약간 더 정확하다.</li><li>약간 더 적은 컴퓨팅 파워를 소모한다.</li><li>체크항목들을 통화하면 모터가 arm하기를 기다리지 않고 바로 GPS를 사용하기 시작한다.</li></ul><div><br/></div><div><b><span style="font-size: 16px;">어떻게 이를 달성하는가?</span></b></div><div><br/></div><ol><li>쿼터니언 방향을 직접적으로 예측하려고 노력하는 대신에, 오차 회전 벡터를 예측하고, inertial navigation 방정식으로부터 얻은 쿼터니언을 수정한다.</li></ol><div>          이 방법은 더 큰 각도 오차가 있을 때 더 유리하다. 큰 각도가 바뀌면서 쿼터니언 선형화에 관련된 에러를 피할 수 있기 때문이다.</div><ul><li style="list-style: none; display: inline"><ul><li>이 방법에 대한 더 자세한 설명을 보려면 다음 참조 : “Rotation Vector in Attitude Estimation”, Mark E. Pittelkau, Journal of Guidance, Control, and Dynamics, 2003</li></ul></li></ul><ol start="2"><li>새로운 EKF은 지연된 시간 수평선 위에서 실행됨으로 인하여, 측정값들이 합쳐질 때, 같은 시간 지점에서의 측정치, 필터 state, 공분산 메트릭스를 사용한다.</li></ol><div>          기존의 EKF는 더 간단한 방법을 사용하는데, 지연된 측정은 지연된 state를 사용하여 융합되지만, 공분산 메트릭스는 현재 시간의 것을 사용하므로 정확도가 감소된다.</div><ul><li style="list-style: none; display: inline"><ul><li> 지연된 필터 state는 상보 필터를 사용하여 현재 시간 상에서 예측된다. 상보필터는 시간 지연을 제거하고 측정치들을 융합할때 일어난 state에서의 갑작스런 변화를 필터링한다.</li><li>이 방법은 ANU의 Ali Khosravian의 출력 예측기에 영감을 받았다 : “Recursive Attitude Estimation in the Presence of Multi-rate and Multi-delay Vector Measurements,” A Khosravian, J Trumpf, R Mahony, T Hamel - American Control Conference, vol.-, 2015.</li><li>이 것은 매번 업데이트때마다 버퍼에 저장된 IMU를 사용하여 state를 되감기하는 방법에 비해 계산 비용이 매우 저렴하지만, 약간 덜 정확하다.</li></ul></li></ul><div>                    기존의 EKF는 시간에 걸쳐서 점진적으로 증가시켜 다음 측정치에 적용함으로써 state 수정치를 부드럽게 하며, 이는 필터의 안정성을 감소시킨다.</div><ol start="3"><li>추가적인 수학적 최적화와 코드 속도 개선이 도입되었다.</li><li>고정된 편위(declination)를 사용한 간단한 콤파스 요우 앵글 퓨전 방법이 추가되었다. 이는 지상에서 사용되거나 자기장 간섭때문에 더 정확한 자력계 퓨전 테크닉을 사용할 수 없을때 이용된다.</li></ol><div><br/></div><div><span style="font-size: 16px;"><b>EKF2 사용하기</b></span></div><div><br/></div><ol><li>EK2_ENABLE=1을 세팅함으로써 새로운 EKF를 활성화시킨다. 이제 EKF2는 실행과 로깅을 동시에 수행한다. 그러나 컨트롤 루프에서 사용되지는 않는다.</li><li>컨트롤 루프에서 사용하려면 AHRS_EKF_TYPE=2를 세팅해준다.</li><li>여러개의 IMU들을 사용하려면 EK2_IMU_MASK파라미터로 조정해준다.</li></ol><ul><li style="list-style: none; display: inline"><ul><li>IMU1만 사용하려면, EK2_IMU_MASK=1을 세팅 (기본값)</li><li>IMU2만 사용하려면, EK2_IMU_MASK=2를 세팅</li><li>IMU1과 IMU2를 사용하여 두 개의 EKF2를 실행하려면, EK2_IMU_MASK=3을 세팅하고, 기존의 EKF는 EKF_ENABLE=0를 사용하여 끈다.</li></ul></li></ul><ol start="4"><li>파라미터를 세팅한 후에는 리부트가 필요하다.</li></ol><div><br/></div><div><span style="font-size: 16px;"><b>EKF2 Log Data</b></span></div><div><br/></div><div>EKF2 데이터는 NKF1 부터 NKF9까지의 로그 패킷에서 찾을 수 있다.</div><div><br/></div><div>NKF1에서 NKF4까지의 패킷은 첫번째 EKF 인스턴스를 위한 정보를 포함한다.</div><div>NKF6에서 NKF9까지의 패킷은 같은 정보를 포함하지만 EK2_IMU_MASK파라미터를 사용하도록 되어있을 경우의 두번째 인스턴스를 위한 것이다. </div><div>NKF5 패킷은 비행 컨트롤에 주로 작용하는 인스턴스를 위한 위한 옵티컬 플로우 정보를 포함한다.</div><div><br/></div><div>아래와 같이 파라미터를 변경하면 로그가 기록된다.</div><div>•EKF_ENABLE = 0 (turns off the legacy EKF)</div><div>•EK2_ENABLE = 1 (turns on EKF2)</div><div>•EK2_IMU_MASK = 3 (Instructs EKF2 to run two instances, one for IMU1 (MPU6000) and one for IMU2 (LDG20H + LSM303D)</div><div>•AHRS_EKF_TYPE = 2 (tells the flight control system to use EKF2</div><div>•LOG_BITMASK = 131071 (logs 50Hz data from startup)</div><div> </div><div><br/></div><div><hr/></div><div><br/></div><div><b><br/></b></div><div><b>EKF_ENABLE</b></div><div><br/></div><div>EKF1활성화 (0 : Disabled / 1 : Enabled)</div><div>EFK1을 다른 알고리즘을 사용할때 EKF1을 비활성화할 수 있도록 한다.</div><div>비활성화할때는 대체 알고리즘인 EKF2가 반드시 활성화되어야 하고(EK2_ENABLE = 1),</div><div>비행 컨트롤 알고리즘도 대체 예측기를 사용해야 한다.(AHRS_EKF_TYPE = 2)</div><div><br/></div><div><b>EKF_GPS_TYPE</b></div><div><br/></div><div>GPS컨트롤 모드</div><div>0 : GPS 3D 속도 &amp; 2D 위치</div><div>1 : GPS 2D 속도 &amp; 2D 위치</div><div>2 : GPS 2D 위치</div><div>3 : GPS 사용하지 않음. (가능할 경우)Optical flow 사용</div><div><br/></div><div><br/></div><div><hr/></div><div><br/></div><div><br/></div><div><b>EK2_ENABLE</b></div><div><br/></div><div>EKF2활성화 (0: Disabled / 1 : Enabled)</div><div>EKF2를 활성화하는 것은 단지 계산이 수행될 뿐, 비행 컨트롤을 위해 사용된다는 것은 아니다.</div><div>이를 비행 컨트롤에 사용하려면 AHRS_EKF_TYPE=2로 세팅해야 한다.</div><div>EK2_ENABLE이 효과를 발휘하기 위해서는 재부팅이나 재시작이 필요할 수 있다.</div><div><br/></div><div><b>EK2_GPS_TYPE</b></div><div><br/></div><div>GPS컨트롤 모드</div><div>0 : GPS 3D 속도 &amp; 2D 위치</div><div>1 : GPS 2D 속도 &amp; 2D 위치</div><div>2 : GPS 2D 위치</div><div>3 : GPS 사용하지 않음. (가능할 경우)Optical flow 사용</div><div><br/></div><div><br/></div><div><hr/></div><div><br/></div><div><b>AHRS_GPS_USE</b></div><div><b><br/></b></div><div>필터를 사용하려면 이 값은 1로 세팅되어 있어야 한다. 예전의 알고리즘을 사용하려면 0으로 세팅한다.</div><div>이 파라미터에 관계없이 두개의 알고리즘은 실행되고 있는 점을 주의하라.</div><div>풀 속도의 AHRS 데이터 로깅이 활성화되어 있다면, 모든 EKF 데이터는 로그로 남겨질 것이다.</div><div>Copter3.3이후로는 EKF는 기본적으로 활성화 되어있고 이 파라미터는 사용할 수 없다.</div><div>Plane과 Rover 유저들은 여전이 예전 알고리즘을 선택할 수 있다.</div><div><br/></div><div><b>AHRS_EKF_TYPE</b></div><div><b><br/></b></div><div>(0 : Disabled / 1: Enabled / 2 : Enable EKF2)</div><div>자세와 위치 예측을 위해 NavEKF 칼만 필터를 사용할 것인지를 결정하고</div><div>대비책으로 DCM 알고리즘을 사용할 것인지를 결정한다.</div><div>콥터에서는 &quot;disabled&quot;을 선택하더라도 사실상 &quot;enabled&quot;되어 있되 대비책을 사용하지 않는 것과 같게 된다.</div><div><br/></div><div><br/></div><div><hr/></div><div><br/></div><div><span style="font-size: 32px;"><b>파라미터 세팅값</b></span></div><div>(로그 50hz / PX4Flow 컨트롤 루프에 반영)</div><div><br/></div><div><span style="font-size: 16px;"><b>EKF1 사용</b></span></div><div>FLOW_ENABLE=1</div><div>EK2_ENABLE=0</div><div>EKF_ENABLE=1</div><div>AHRS_EKF_TYPE=1</div><div>EKF_GPS_TYPE=3</div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><b>EKF2 사용 </b></span></div><div>FLOW_ENABLE=1</div><div>EKF_ENABLE=0</div><div>EK2_ENABLE=1</div><div>EK2_IMU_MASK=1  <b>(</b>IMU 한개만 사용<b>)</b></div><div>AHRS_EKF_TYPE=2</div><div>EK2_GPS_TYPE=3</div><div>LOG_BITMASK = 131071</div><div><br/></div><div><span style="font-size: 16px;"><b>로그 확인</b></span></div><div>LOG_BITMASK=131071</div><div>LOG_DISARMED=1 (Disarm 상태일 때로 로그 기록)</div><div><br/></div><div>NKF1 ~ NKF4는 칼만필터가 잘 작동하는지 확인할 수 있는 값들</div><div>NKF5는 옵티컬 플로우 관련 값들</div><div><br/></div><div><span style="color: rgb(255, 0, 0);">*EKF와 EK2 혼동하지 않도록 주의!</span></div><div><span style="color: rgb(255, 0, 0);">*효과는 재부팅 후 나타난다.</span></div><div><span style="color: rgb(255, 0, 0);">*보이지 않는 파라미터는 ENABLE관련 파라미터 수정 후 리부트하여 나타나는지 확인!</span></div><div><span style="color: rgb(255, 0, 0);">*미션 플래너 &gt; CONFIG/TUNING &gt; Planner 페이지에서 Advanced View 체크!</span></div><div><br/></div><div>EK*_GPS_TYPE=0으로 하면 mavros/local_postion/* 토픽 발행 안되나?</div><div><br/></div><div><hr/></div><div><span style="color: rgb(118, 0, 216);"><b>얼 1 파라미터 값 (현상태)</b></span></div><div><br/></div><div><span style="font-size: 16px;"><b>EKF1 사용</b></span></div><div>FLOW_ENABLE=1</div><div>EK2_ENABLE=0</div><div>EKF_ENABLE=1</div><div>AHRS_EKF_TYPE=<span style="color: rgb(235, 0, 115);">2</span></div><div>EKF_GPS_TYPE=3</div><div><br/></div><div><span style="font-size: 16px;"><b>EKF2 사용 </b></span></div><div>FLOW_ENABLE=1</div><div><span style="color: rgb(168, 168, 168);">EK2_ENABLE=0</span></div><div><span style="color: rgb(168, 168, 168);">EKF_ENABLE=1</span></div><div>EK2_IMU_MASK= <span style="color: rgb(235, 0, 115);">해당 파라미터 없음</span> <b>(</b>IMU 한개만 사용<b>)</b></div><div>AHRS_EKF_TYPE=2</div><div>EK2_GPS_TYPE= <span style="color: rgb(235, 0, 115);">해당 파라미터 없음 (EK2로 시작하는 파라미터는 EK2_ENABLE 하나임)</span></div><div>LOG_BITMASK = <span style="color: rgb(235, 0, 115);">32767 </span></div><div><br/></div><div><span style="font-size: 16px;"><b>로그 확인</b></span></div><div><span style="color: rgb(168, 168, 168);">LOG_BITMASK= 32767</span></div><div><span style="color: rgb(235, 0, 115);">(이건 어디에선가, Disarm 상태일 때로 로그 기록하려 할 때 아듀파일럿 3.0(?) 이하 버전은 LOG_BITMASK=131071로 수정하고,</span></div><div><span style="color: rgb(235, 0, 115);">그 이상 버전은 LOG_DISARMED=1로 수정하라는 내용을 봐서 내버려 둠</span>)</div><div>LOG_DISARMED=1 (Disarm 상태일 때로 로그 기록)</div><div><br/></div><div><b>그 밖의 파라미터들</b></div><div>AHRS_GPS_USE=1</div><div>AHRS_EKF_USE=<span style="color: rgb(235, 0, 115);">해당 파라미터 없음</span></div><div>EKF_ALT_NOISE=2</div><div><br/></div><div><br/></div><div><br/></div><div><span style="color: rgb(118, 0, 216);"><b>얼 1 파라미터 값 (기본값)</b></span></div><div><br/></div><div><span style="font-size: 16px;"><b>EKF1 사용</b></span></div><div>FLOW_ENABLE=0</div><div><span style="color: rgb(168, 168, 168);">EK2_ENABLE=1</span></div><div><span style="color: rgb(168, 168, 168);">EKF_ENABLE=0</span></div><div>AHRS_EKF_TYPE=2</div><div>EKF_GPS_TYPE= <span style="color: rgb(235, 0, 115);">해당 파라미터 없음 (EKF로 시작하는 파라미터는 EK2_ENABLE 하나임)</span></div><div><br/></div><div><span style="font-size: 16px;"><b>EKF2 사용 </b></span></div><div>FLOW_ENABLE=0</div><div>EK2_ENABLE=1</div><div>EKF_ENABLE=0</div><div>EK2_IMU_MASK= 1 <b>(</b>IMU 한개만 사용<b>)</b></div><div>AHRS_EKF_TYPE=2</div><div>EK2_GPS_TYPE= 0</div><div>LOG_BITMASK = <span style="color: rgb(235, 0, 115);">176126 </span></div><div><br/></div><div><span style="font-size: 16px;"><b>로그 확인</b></span></div><div>LOG_BITMASK= 176126 </div><div>LOG_DISARMED= 0 (Disarm 상태일 때로 로그 기록)</div><div><br/></div><div><b>그 밖의 파라미터들</b></div><div>AHRS_GPS_USE=1</div><div>AHRS_EKF_USE=<span style="color: rgb(235, 0, 115);">해당 파라미터 없음</span></div><div>EKF_ALT_NOISE=<span style="color: rgb(235, 0, 115);">해당 파라미터 없음 (EKF로 시작하는 파라미터는 EK2_ENABLE 하나임)</span></div><div>cf. EK2_ALT_M_NSE=3</div><div>    EK2_ALT_SOURCE=0<br/></div></span>
</div></body></html> 